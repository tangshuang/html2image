{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a0bf33fe6fda355f398d","webpack:///./componouts/html2img/src/index.js","webpack:///external \"html2canvas\"","webpack:///external \"downloadjs\"","webpack:///./componouts/html2img/src/styled-dom.js"],"names":["Html2img","el","options","factory","document","querySelector","type","filename","name","filetype","classNames","pseudo","bgDefault","style","backgroundColor","width","offsetWidth","height","offsetHeight","onrendered","before","canvas","after","init","dataurl","toDataURL","toBlob","blob","base64","getComputedCssText","buildStyledElement","buildStyledDOM","getStyledHtml","computedStyles","window","getComputedStyle","defaultCssText","cssText","forEach","value","getPropertyValue","property","replace","setAttribute","stylesText","svgElements","indexOf","tangName","beforeStylesText","createElement","className","insertBefore","firstChild","afterStylesText","appendChild","children","length","i","len","child","outerHTML"],"mappings":"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","file":"html2img.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"html2canvas\"), require(\"downloadjs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"html2canvas\", \"downloadjs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"html2img\"] = factory(require(\"html2canvas\"), require(\"downloadjs\"));\n\telse\n\t\troot[\"html2img\"] = factory(root[\"html2canvas\"], root[\"downloadjs\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a0bf33fe6fda355f398d","import html2canvas from 'html2canvas'\nimport download from 'downloadjs'\nimport {buildStyledDOM} from './styled-dom'\n\nexport default class Html2img {\n    static canvas(el, options, factory) {\n        if(typeof el === 'string') {\n            el = document.querySelector(el)\n        }\n        let type = options.type || 'png'\n        let filename = (options.name || 'download') + '.' + type\n        let filetype = 'image/' + type\n\n        // build styles\n        let classNames = options.classNames || [\n            'background-color',\n            'box-sizing',\n            'color',\n            'display',\n            'font-family',\n            'font-size',\n            'line-height',\n            'overflow-x',\n            'overflow-y',\n            'opacity',\n            'shape-rendering',\n            'text-anchor',\n            'text-size-adjust',\n            'stroke',\n            'stroke-width',\n            'fill',\n            // 'transform',\n            // 'transform-origin',\n        ]\n        buildStyledDOM(el, {\n            classNames,\n            pseudo: options.pseudo,\n        })\n\n        // background-color\n        let bgDefault = el.style.backgroundColor\n        el.style.backgroundColor = options.backgroundColor || '#ffffff'\n\n        options.width = options.width || el.offsetWidth\n        options.height = options.height || el.offsetHeight\n        options.onrendered = canvas => {\n            // reset backgroundColor\n            el.style.backgroundColor = bgDefault\n\n            if(typeof options.before === 'function') {\n                options.before(el, canvas)\n            }\n\n            factory(canvas, filename, filetype)\n\n            if(typeof options.after === 'function') {\n                options.after(el, canvas)\n            }\n        }\n\n        if(typeof options.init === 'function') {\n            options.init(el, options)\n        }\n\n        html2canvas(el, options)\n        return this\n    }\n    static base64(el, options, factory) {\n        this.canvas(el, options, (canvas, filename, filetype) => {\n            let dataurl = canvas.toDataURL(filetype)\n            factory(dataurl, filename, filetype)\n        })\n        return this\n    }\n    static blob(el, options, factory) {\n        this.canvas(el, options, (canvas, filename, filetype) => {\n            canvas.toBlob(blob => factory(blob, filename, filetype), 'image/' + filetype, 1)\n        })\n        return this\n    }\n    static save(el, options) {\n        this.base64(el, options, download)\n        return this\n    }\n    static copy(el, options) {\n        return this\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./componouts/html2img/src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"html2canvas\"\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"downloadjs\"\n// module id = 2\n// module chunks = 0","// import {getFontFace} from './font-face'\r\n\r\nexport function getComputedCssText(el, options = {}) {\r\n    var pseudo = options.pseudo || null\r\n    var computedStyles = window.getComputedStyle(el, pseudo)\r\n    var classNames = options.classNames || []\r\n    var defaultCssText = options.defaultCssText || el.style.cssText\r\n    var cssText = ''\r\n    classNames.forEach(property => {\r\n        let value = computedStyles.getPropertyValue(property)\r\n        value = value.replace(`\"`, `'`)\r\n        cssText += property + ':' + value + ';'\r\n    })\r\n    if(defaultCssText !== '' && defaultCssText !== cssText) {\r\n        cssText = defaultCssText + cssText\r\n    }\r\n    return cssText\r\n}\r\n\r\n// export function buildSvgFontFace(el, options) {\r\n//     var fontFamilys = []\r\n//     var textElements = el.querySelectorAll('text')\r\n//     textElements.forEach(item => {\r\n//         let textComputedStyles = window.getComputedStyle(item, null)\r\n//         let familys = textComputedStyles.getPropertyValue('font-family')\r\n//         familys = familys.split(',')\r\n//         if(familys.length === 0) return\r\n//         familys.forEach(item => {\r\n//             let name = item.trim().replace(/\"|'/g, '')\r\n//             let cssText = getFontFace(name)\r\n//             if(cssText) {\r\n//                 fontFamilys.push(cssText)\r\n//             }\r\n//         })\r\n//     })\r\n//\r\n//     if(fontFamilys.length === 0) return\r\n//\r\n//     var defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs')\r\n//     el.insertBefore(defs, el.firstElementChild)\r\n//\r\n//     var style = document.createElementNS('http://www.w3.org/2000/svg', 'style')\r\n//     style.setAttribute('type', 'text/css')\r\n//     defs.appendChild(style)\r\n//\r\n//     var styleTextContent = fontFamilys.join('')\r\n//     var styleTextNode = document.createTextNode(styleTextContent)\r\n//     style.append(styleTextNode)\r\n// }\r\n\r\nexport function buildStyledElement(el, options) {\r\n    var defaultCssText = el.style.cssText\r\n    el.setAttribute('default-style', defaultCssText)\r\n\r\n    var stylesText = getComputedCssText(el, options)\r\n    el.style.cssText = stylesText\r\n\r\n    // if(el.tagName === 'svg') {\r\n    //     buildSvgFontFace(el, options)\r\n    // }\r\n\r\n    var svgElements = options.svgElements || ['svg', 'g', 'path', 'line', 'circle', 'rect', 'text', 'tspan', 'style']\r\n    if(options.pseudo && svgElements.indexOf(el.tangName) === -1) {\r\n        options.pseudo = ':before'\r\n        var beforeStylesText = getComputedCssText(el, options)\r\n        var before = document.createElement('span')\r\n        before.className = 'pseudo-element'\r\n        before.style.cssText = beforeStylesText\r\n        el.insertBefore(before, el.firstChild)\r\n\r\n        options.pseudo = ':after'\r\n        var afterStylesText = getComputedCssText(el, options)\r\n        var after = document.createElement('span')\r\n        after.className = 'pseudo-element'\r\n        after.style.cssText = afterStylesText\r\n        el.appendChild(after)\r\n    }\r\n}\r\n\r\nexport function buildStyledDOM(el, options) {\r\n    if(el.children.length > 0) for(let i = 0, len = el.children.length; i < len; i ++) {\r\n        let child = el.children[i]\r\n        buildStyledDOM(child, options)\r\n    }\r\n    buildStyledElement(el, options)\r\n}\r\n\r\n\r\n// export function buildSvgTextNode(el, options) {\r\n//     var pseudo = options.pseudo || null\r\n//     var classNames = options.classNames || []\r\n//     var parentNode = el.parentNode\r\n//     var treeNodes = [parentNode, el]\r\n//     var styles = {}\r\n//     for(let i = 0; parentNode.tagName !== 'svg' && parentNode.tagName !== 'BODY' && i < 100; i ++) {\r\n//         parentNode = parentNode.parentNode\r\n//         treeNodes.unshift(parentNode)\r\n//     }\r\n//\r\n//     treeNodes.forEach(item => {\r\n//         var computedStyles = window.getComputedStyle(item, pseudo)\r\n//         classNames.forEach(property => {\r\n//             let value = computedStyles.getPropertyValue(property)\r\n//             if(styles[property] !== value) {\r\n//                 styles[property] = value\r\n//             }\r\n//         })\r\n//     })\r\n// }\r\n\r\nexport function getStyledHtml(el, options) {\n    buildStyledDOM(el, options)\r\n    return el.outerHTML\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./componouts/html2img/src/styled-dom.js"],"sourceRoot":""}